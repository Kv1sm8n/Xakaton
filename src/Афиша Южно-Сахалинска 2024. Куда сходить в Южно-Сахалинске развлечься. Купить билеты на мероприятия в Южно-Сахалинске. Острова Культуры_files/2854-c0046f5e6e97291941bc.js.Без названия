(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2854],{89937:function(e,t,a){"use strict";a.d(t,{G:function(){return W}});var l=a(77460),r=a(2784),i=a(42737),_=a.n(i),c=a(19034),o=a.n(c),s=a(530),n=a(72779),m=a.n(n),d=a(58451),p=a(55766),b=a(39097),u=a(73172),B=a(40190),k=a(3349),h=a(7252),v=a(52322),W=function(e){var t,a,i,c,n,W,f,y,x,j=e.mode,N=e.forRef,T=e.info,S=e.entity,w=e.defaultDate,M=e.showBuyButton,E=e.index,D=e.entityType,g=e.bookingOnly,Y=(0,r.useState)(!1),O=Y[0],L=Y[1],I=T.periodEnd<o()().valueOf(),F="seances"===(null===S||void 0===S?void 0:S.type),C=T.periodEnd,P=T.periodStart,U=T.hoursGroups,q=T.venue,A=!!(U&&U.length>0)&&function(e){switch(e){case"\u041f\u043d.":return"\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a";case"\u0412\u0442.":return"\u0412\u0442\u043e\u0440\u043d\u0438\u043a";case"\u0421\u0440.":return"\u0421\u0440\u0435\u0434\u0430";case"\u0427\u0442.":return"\u0427\u0435\u0442\u0432\u0435\u0440\u0433";case"\u041f\u0442.":return"\u041f\u044f\u0442\u043d\u0438\u0446\u0430";case"\u0421\u0431.":return"\u0421\u0443\u0431\u0431\u043e\u0442\u0430";case"\u0412\u0441.":return"\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435"}return""}(U[0].days),z=P;if(!F){var K=o()().valueOf();z=P<K?K:P}var H=o()(z).format("DD MMMM").split(" ")[0],G=o()(z).format("DD MMMM").split(" ")[1],J=o()(z).format("YYYY"),R=o()(C).format("DD MMMM").split(" ")[0],Z=o()(C).format("DD MMMM").split(" ")[1],Q=o()(C).format("YYYY"),V=Boolean(null===q||void 0===q?void 0:q.place),X=(0,p.K)((null===q||void 0===q||null===(t=q.place)||void 0===t?void 0:t.address)||(null===q||void 0===q||null===(a=q.location)||void 0===a?void 0:a.address))+(V?"":(0,B.d)(null===q||void 0===q||null===(i=q.location)||void 0===i?void 0:i.address)),$=(0,l.Z)({eventType:null===S||void 0===S?void 0:S.type},"".concat(null===S||void 0===S?void 0:S.type,"Id"),T._id);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:m()(_().timetableBlock,"schedule"===j&&_().single,F&&_().seances,(M||g)&&_().withButton),children:[(0,v.jsx)("div",{className:_().timetableBlock_dateWrapper,children:F?(0,v.jsxs)("div",{className:_().timetableBlock_dateWrapper__dateStart,children:[(0,v.jsx)("div",{className:_().timetableBlock_dateWrapper__dayStart,children:H}),(0,v.jsxs)("div",{className:_().timetableBlock_dateWrapper__monthYearStart,children:[(0,v.jsx)("div",{className:_().timetableBlock_dateWrapper__monthStart,children:"".concat(G," ").concat(J)}),(0,v.jsx)("div",{className:_().timetableBlock_dateWrapper__yearStart,children:A})]})]}):(0,v.jsx)("div",{className:_().timetableBlock_dateWrapper__date,children:(0,v.jsxs)("div",{className:_().timetableBlock_dateWrapper__dateStartAndEnd,children:[(0,v.jsxs)("div",{className:_().timetableBlock_dateWrapper__dateStart,children:[(0,v.jsx)("div",{className:_().timetableBlock_dateWrapper__dayStart,children:H}),(0,v.jsxs)("div",{className:_().timetableBlock_dateWrapper__monthYearStart,children:[(0,v.jsx)("div",{className:_().timetableBlock_dateWrapper__monthStart,children:G}),(0,v.jsx)("div",{className:_().timetableBlock_dateWrapper__yearStart,children:J})]})]}),(0,v.jsx)("div",{className:_().timetableBlock_dateWrapper__dash,children:"\u2014"}),(0,v.jsxs)("div",{className:_().timetableBlock_dateWrapper__dateEnd,children:[(0,v.jsx)("div",{className:_().timetableBlock_dateWrapper__dayEnd,children:R}),(0,v.jsxs)("div",{className:_().timetableBlock_dateWrapper__monthYearEnd,children:[(0,v.jsx)("div",{className:_().timetableBlock_dateWrapper__monthEnd,children:Z}),(0,v.jsx)("div",{className:_().timetableBlock_dateWrapper__yearEnd,children:Q})]})]})]})})}),(0,v.jsx)("div",{className:_().timetableBlock_timeWrapper,children:I?(0,v.jsx)("div",{className:_().timetableBlock_timeWrapper__time,children:(0,v.jsx)("span",{children:"tours"===D?"\u0422\u0443\u0440 \u043f\u0440\u043e\u0448\u0435\u043b":"\u0421\u043e\u0431\u044b\u0442\u0438\u0435 \u043f\u0440\u043e\u0448\u043b\u043e"})}):(0,v.jsx)(v.Fragment,{children:F?(0,v.jsx)("div",{className:_().timetableBlock_timeWrapper__time,children:(0,v.jsx)("span",{children:"tours"===D?o().tz(z,k.E.timezone).format("HH:mm"):U[0].times})}):(0,v.jsx)("div",{className:_().timetableBlock_timeWrapper__timesList,children:U.map((function(e,t){return(0,v.jsxs)("div",{className:_().timetableBlock_timeWrapper__time,children:[(0,v.jsx)("span",{className:_().timetableBlock_timeWrapper__time_days,children:e.days}),(0,v.jsx)("span",{className:_().timetableBlock_timeWrapper__time_time,children:e.times})]},t)}))})})}),(0,v.jsx)("div",{className:m()(_().timetableBlock_placeWrapper,V&&_().withPlaceName),children:(0,v.jsxs)("div",{className:_().timetableBlock_placeWrapper_place,children:[V&&(0,v.jsx)("div",{className:_().timetableBlock_placeWrapper__name,children:(0,v.jsx)(b.default,{href:"/places/".concat(q.place._id,"/").concat(q.place.sysName),children:null===(c=q.place)||void 0===c?void 0:c.name})}),(0,v.jsx)("button",{className:_().timetableBlock_placeWrapper__button,onClick:function(){return L(!O)},children:(0,v.jsxs)("div",{className:_().timetableBlock_placeWrapper__address,children:[X,(0,v.jsx)(s.M$,{classes:m()([_().showMoreIcon,O&&_().rotate]),width:12,height:5})]})})]})}),(M||g)&&(0,v.jsx)("div",{className:_().timetableBlock_buttonWrapper,children:(0,v.jsx)("div",{className:_().timetableBlock_buttonWrapper__payWrapper,children:(0,v.jsx)("div",{className:_().timetableBlock_buttonWrapper__payInner,children:g?(0,v.jsx)(h.q,{defaultSeance:T._id,defaultDate:w,entityType:"tours",entity:S}):(0,v.jsx)(u.l,{entityType:D,venueId:null===(n=q.place)||void 0===n?void 0:n._id.toString(),entityId:S._id,defaultDate:w,eventExtraProps:$,position:"schedule",dataTestId:"buy-button-schedule-".concat(E)})})})}),O&&(0,v.jsx)("div",{className:_().timetableBlock_mapWrapper,children:(0,v.jsx)("div",{className:_().timetableBlock_mapWrapper__map,children:(0,v.jsx)(d.O,{classes:_().timetableBlock_mapWrapper__mapInner,mapPosition:(null===(W=q.place)||void 0===W?void 0:W.mapPosition)||(null===(f=q.location)||void 0===f?void 0:f.mapPosition),placeName:(null===(y=q.place)||void 0===y?void 0:y.name)||(0,p.K)(null===(x=q.location)||void 0===x?void 0:x.address)})})})]}),S&&S.actualSeances.all.length>1&&"header"===j&&(0,v.jsx)("div",{onClick:function(){return window.scrollTo({top:N.current.offsetTop-100,behavior:"smooth"})},className:_().showMoreButton,children:"\u041f\u041e\u0421\u041c\u041e\u0422\u0420\u0415\u0422\u042c \u0415\u0429\u0401"})]})}},12854:function(e,t,a){"use strict";a.d(t,{t:function(){return u}});var l=a(64993),r=a(2784),i=a(21262),_=a.n(i),c=a(89937),o=a(32946),s=a(19034),n=a.n(s),m=a(76635),d=a.n(m),p=a(52322),b=function(e){return(0,l.Z)(e).sort((function(e,t){return e.start-t.start}))},u=function(e){var t=e.data,a=e.entity,l=e.forRef,i=e.withDateFilter,s=e.bookingOnly,m=e.entityType,u=void 0===m?"events":m;if(!t||0===t.length)return(0,p.jsx)(p.Fragment,{});var B=b(t),k=(0,r.useState)(B),h=k[0],v=k[1];(0,r.useEffect)((function(){v(b(t))}),[t]);var W,f,y,x=(0,r.useState)(null),j=x[0],N=x[1],T=(0,r.useState)(null),S=T[0],w=T[1];W=Object.keys(null===a||void 0===a?void 0:a.schedulesActiveDays).map((function(e){return Number(e)})).sort((function(e,t){return e-t})),f="schedules"===a.type?n()(+B[0].periodStart).isAfter(n()())?n()(+B[0].periodStart):n()():"seances"===a.type?n()(+W[0]):n()();var M=n()(+W[W.length-1]);y=Math.ceil(Math.abs(+M-+f)/864e5);var E=(0,r.useState)(3),D=E[0],g=E[1],Y=(0,r.useState)(!!h[D]),O=Y[0],L=Y[1];(0,r.useEffect)((function(){L(!!h[D])}),[h,D]);return(0,p.jsxs)("div",{className:_().timetables__wrapper,children:[(0,p.jsx)("div",{className:_().timetables__title,ref:l,children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),i&&(0,p.jsx)("div",{className:_().timetables__dateFilter,children:(0,p.jsx)(o.f,{noBorder:!0,leftDatesDefault:0,rightDatesDefault:y,dateStart:f,onChange:function(e){var t=e.start,a=e.end;g(3),N(t||null),w(a||null);var l=B.filter((function(e){return function(e,t,a){if(t&&!a)return Boolean(e.activeDays.find((function(e){return+n()(e.start).startOf("day")===+n()(t).startOf("day")})));if(t&&a){for(var l=function(t){if(e.activeDays.find((function(e){return+n()(e.start).startOf("day")===+n()(t).startOf("day")||+n()(e.start).startOf("day")===+n()(a).startOf("day")})))return{v:!0}},r=t;r<=a;r=+n()(r).add(1,"day")){var i=l(r);if("object"===typeof i)return i.v}return!1}}(e,t,a)}));v(t||a?d().uniq(l):B)},filters:{start:j,end:S},enableDates:W,withoutInterim:!0,isOpenMobileCarousel:!0})}),h.slice(0,D).map((function(e,t){return(0,p.jsx)(c.G,{mode:"schedule",index:t,info:e,entity:a,defaultDate:e.start,showBuyButton:e.showBuyButton,entityType:u,bookingOnly:s},e.start+e.end+t)})),O&&(0,p.jsx)("div",{className:_().timetables__showMore,children:(0,p.jsx)("div",{className:_().timetables__showMoreTitle,onClick:function(){g(D+3)},children:"\u041f\u041e\u0421\u041c\u041e\u0422\u0420\u0415\u0422\u042c \u0415\u0429\u0401"})})]})}},40190:function(e,t,a){"use strict";a.d(t,{d:function(){return l}});var l=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e&&e.comment?"".concat(t?", ":"").concat(e.comment):""}},42737:function(e){e.exports={timetableBlock:"TimetableBlock_timetableBlock__1zhlN",timetableBlock_placeWrapper:"TimetableBlock_timetableBlock_placeWrapper__3kwXN",single:"TimetableBlock_single__2B9lC",withButton:"TimetableBlock_withButton__2ThdU",seances:"TimetableBlock_seances__1QKAq",timetableBlock_timeWrapper:"TimetableBlock_timetableBlock_timeWrapper__33fes",timetableBlock_timeWrapper__time:"TimetableBlock_timetableBlock_timeWrapper__time__2UJLF",timetableBlock_dateWrapper:"TimetableBlock_timetableBlock_dateWrapper__146Hn",timetableBlock_dateWrapper__dateStartAndEnd:"TimetableBlock_timetableBlock_dateWrapper__dateStartAndEnd__2ih9p",timetableBlock_dateWrapper__dateStart:"TimetableBlock_timetableBlock_dateWrapper__dateStart__3mUD-",timetableBlock_dateWrapper__dateEnd:"TimetableBlock_timetableBlock_dateWrapper__dateEnd__3g3lq",timetableBlock_dateWrapper__dayStart:"TimetableBlock_timetableBlock_dateWrapper__dayStart__iF5zy",timetableBlock_dateWrapper__dayEnd:"TimetableBlock_timetableBlock_dateWrapper__dayEnd__w1bKU",timetableBlock_dateWrapper__monthYearStart:"TimetableBlock_timetableBlock_dateWrapper__monthYearStart__1_Ib5",timetableBlock_dateWrapper__monthYearEnd:"TimetableBlock_timetableBlock_dateWrapper__monthYearEnd__2R3Jl",timetableBlock_dateWrapper__monthStart:"TimetableBlock_timetableBlock_dateWrapper__monthStart__2KDaM",timetableBlock_dateWrapper__monthEnd:"TimetableBlock_timetableBlock_dateWrapper__monthEnd__2bTZt",timetableBlock_dateWrapper__yearStart:"TimetableBlock_timetableBlock_dateWrapper__yearStart__2uY0W",timetableBlock_dateWrapper__yearEnd:"TimetableBlock_timetableBlock_dateWrapper__yearEnd__1BvOL",timetableBlock_dateWrapper__dash:"TimetableBlock_timetableBlock_dateWrapper__dash__3w6qM",timetableBlock_timeWrapper__timesList:"TimetableBlock_timetableBlock_timeWrapper__timesList__mpn6L",timetableBlock_timeWrapper__time_days:"TimetableBlock_timetableBlock_timeWrapper__time_days__39rzv",timetableBlock_timeWrapper__time_time:"TimetableBlock_timetableBlock_timeWrapper__time_time__bsUUN",withPlaceName:"TimetableBlock_withPlaceName__275mB",timetableBlock_placeWrapper__name:"TimetableBlock_timetableBlock_placeWrapper__name__2tiDK",timetableBlock_placeWrapper__address:"TimetableBlock_timetableBlock_placeWrapper__address__2W3Uy",rotate:"TimetableBlock_rotate__3d9Eb",timetableBlock_buttonWrapper:"TimetableBlock_timetableBlock_buttonWrapper__2fzfP",timetableBlock_buttonWrapper__payWrapper:"TimetableBlock_timetableBlock_buttonWrapper__payWrapper__2D6ho",timetableBlock_mapWrapper:"TimetableBlock_timetableBlock_mapWrapper__1luql",timetableBlock_mapWrapper__map:"TimetableBlock_timetableBlock_mapWrapper__map__1YJt2",timetableBlock_mapWrapper__mapInner:"TimetableBlock_timetableBlock_mapWrapper__mapInner__340ll",showMoreButton:"TimetableBlock_showMoreButton__2A4b-"}},21262:function(e){e.exports={timetables__wrapper:"TimetableList_timetables__wrapper__2q3N2",timetables__title:"TimetableList_timetables__title__1mh4e",timetables__dateFilter:"TimetableList_timetables__dateFilter__2HfL7",timetables__showMore:"TimetableList_timetables__showMore__1ScVg",timetables__showMoreTitle:"TimetableList_timetables__showMoreTitle__39sUf"}}}]);
//# sourceMappingURL=2854-c0046f5e6e97291941bc.js.map