(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9173],{20225:function(e,a,n){"use strict";n.d(a,{L:function(){return E}});var i=n(2784),t=n(24740),s=n.n(t),r=n(9207),c=n(64993),o=n(92847),l=n.n(o),d=n(29928),m=n.n(d),u=n(30023),g=n(89010),p=n(4565),_=n(72779),x=n.n(_),b=n(14423),f=n(51658),v=n(3164),k=new Map([["clean-rooms",{name:"\u0447\u0438\u0441\u0442\u044b\u0435 \u043d\u043e\u043c\u0435\u0440\u0430",originName:"clean-rooms",minRating:4,maxRating:5}],["good-service",{name:"\u0445\u043e\u0440\u043e\u0448\u0435\u0435 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435",originName:"good-service",minRating:4,maxRating:5}],["dirty-rooms",{name:"\u0433\u0440\u044f\u0437\u043d\u044b\u0435 \u043d\u043e\u043c\u0435\u0440\u0430",originName:"dirty-rooms",minRating:1,maxRating:3}],["bad-service",{name:"\u043f\u043b\u043e\u0445\u043e\u0435 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435",originName:"bad-service",minRating:1,maxRating:3}],["beautiful-interior",{name:"\u043a\u0440\u0430\u0441\u0438\u0432\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u044c\u0435\u0440",originName:"beautiful-interior",minRating:1,maxRating:5}],["delicious",{name:"\u0432\u043a\u0443\u0441\u043d\u043e",originName:"delicious",minRating:4,maxRating:5}],["tasteless",{name:"\u043d\u0435\u0432\u043a\u0443\u0441\u043d\u043e",originName:"tasteless",minRating:1,maxRating:3}],["expensive",{name:"\u0434\u043e\u0440\u043e\u0433\u043e",originName:"expensive",minRating:1,maxRating:5}],["low-cost",{name:"\u0431\u044e\u0434\u0436\u0435\u0442\u043d\u043e",originName:"low-cost",minRating:1,maxRating:5}],["interesting",{name:"\u0418\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e",originName:"interesting",minRating:4,maxRating:5}],["useful",{name:"\u041f\u043e\u043b\u0435\u0437\u043d\u043e",originName:"useful",minRating:4,maxRating:5}],["exciting",{name:"\u0423\u0432\u043b\u0435\u043a\u0430\u0442\u0435\u043b\u044c\u043d\u043e",originName:"exciting",minRating:1,maxRating:5}],["boring",{name:"\u0421\u043a\u0443\u0447\u043d\u043e",originName:"boring",minRating:1,maxRating:3}],["not-advise",{name:"\u041d\u0435 \u0441\u043e\u0432\u0435\u0442\u0443\u044e",originName:"not-advise",minRating:1,maxRating:3}]]),N=[{name:"\u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e",originName:"interesting",minRating:4,maxRating:5},{name:"\u043f\u043e\u043b\u0435\u0437\u043d\u043e",originName:"useful",minRating:4,maxRating:5},{name:"\u0443\u0432\u043b\u0435\u043a\u0430\u0442\u0435\u043b\u044c\u043d\u043e",originName:"exciting",minRating:4,maxRating:5},{name:"\u0441\u043a\u0443\u0447\u043d\u043e",originName:"boring",minRating:1,maxRating:3},{name:"\u043d\u0435 \u0441\u043e\u0432\u0435\u0442\u0443\u044e",originName:"not-advise",minRating:1,maxRating:3}],h=[{name:"\u0445\u043e\u0440\u043e\u0448\u0435\u0435 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435",originName:"good-service",minRating:4,maxRating:5},{name:"\u0447\u0438\u0441\u0442\u044b\u0435 \u043d\u043e\u043c\u0435\u0440\u0430",originName:"clean-rooms",minRating:4,maxRating:5},{name:"\u043a\u0440\u0430\u0441\u0438\u0432\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u044c\u0435\u0440",originName:"beautiful-interior",minRating:1,maxRating:5},{name:"\u043f\u043b\u043e\u0445\u043e\u0435 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435",originName:"bad-service",minRating:1,maxRating:3},{name:"\u0433\u0440\u044f\u0437\u043d\u044b\u0435 \u043d\u043e\u043c\u0435\u0440\u0430",originName:"dirty-rooms",minRating:1,maxRating:3}],R=[{name:"\u0445\u043e\u0440\u043e\u0448\u0435\u0435 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435",originName:"good-service",minRating:4,maxRating:5},{name:"\u043a\u0440\u0430\u0441\u0438\u0432\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u044c\u0435\u0440",originName:"beautiful-interior",minRating:1,maxRating:5},{name:"\u0432\u043a\u0443\u0441\u043d\u043e",originName:"delicious",minRating:4,maxRating:5},{name:"\u0431\u044e\u0434\u0436\u0435\u0442\u043d\u043e",originName:"low-cost",minRating:1,maxRating:5,disabled:["expensive"]},{name:"\u043f\u043b\u043e\u0445\u043e\u0435 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435",originName:"bad-service",minRating:1,maxRating:3},{name:"\u0434\u043e\u0440\u043e\u0433\u043e",originName:"expensive",minRating:1,maxRating:5,disabled:["low-cost"]},{name:"\u043d\u0435\u0432\u043a\u0443\u0441\u043d\u043e",originName:"tasteless",minRating:1,maxRating:3}],j=n(77460),F=new Map([["events","event"],["places","place"],["hotels","hotel"],["restaurants","restaurant"],["touristroutes","touristRoute"],["overviews","article"],["streams","stream"],["news","article"],["excursions","excursion"],["tours","tour"]]),C=function(e,a){return(0,j.Z)({type:F.get(e)},"".concat(F.get(e),"Id"),a)},w=n(52322),D=function(e){var a=e.entity,n=e.entityType,t=e.isOpen,s=e.setIsOpen,o=e.user,d=e.setIsSuccessModalOpen,_=(0,f.I)(),k=(0,i.useState)(0),j=k[0],F=k[1],D=(0,i.useState)([]),y=D[0],M=D[1],B=(0,i.useState)(""),S=B[0],T=B[1],O="hotels"===n?h:"restaurants"===n?R:N,W=function(){var e=(0,r.Z)(l().mark((function e(){var i,t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],y.forEach((function(e){return i.push(e.originName)})),t={userId:o._id,description:S,entity:C(n,a._id),value:j,tags:i},e.next=5,_((0,v.L5)(t));case 5:e.sent.error||(F(0),T(""),M([]),d(!0),s(!1));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e){return"places"===n||"hotels"===n||"restaurants"===n?e?"\u043c\u0435\u0441\u0442\u043e":"\u043c\u0435\u0441\u0442\u0435":"events"===n?e?"\u0441\u043e\u0431\u044b\u0442\u0438\u0435":"\u0441\u043e\u0431\u044b\u0442\u0438\u0438":"overviews"===n||"news"===n||"touristroutes"===n?e?"\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b":"\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0435":"streams"===n?e?"\u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044e":"\u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u0438":void 0},z=function(e){var a;return!(j>=e.minRating&&j<=e.maxRating)||0===j||!(null===(a=y.find((function(e){return null===e||void 0===e?void 0:e.disabled})))||void 0===a||!a.disabled.find((function(a){return a===e.originName})))},q=function(){F(0),T(""),M([]),s(!1)};return(0,w.jsxs)(u.u,{isOpen:t,onRequestClose:q,classNameWrapper:m().wrapper,children:[(0,w.jsx)("div",{className:m().header,children:(0,w.jsxs)("div",{className:m().title,children:["\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432 \u043e ",I(!1)," ",function(){var e=a.name;return 171!==a.name[0].charCodeAt(0)&&(e="\xab"+e),187!==a.name[a.name.length-1].charCodeAt(0)&&(e+="\xbb"),e}()]})}),(0,w.jsxs)("div",{className:m().body,children:[(0,w.jsxs)("div",{className:m().ratingDescription,children:[(0,w.jsxs)("div",{className:m().label,children:["\u041e\u0446\u0435\u043d\u0438\u0442\u0435 ",I(!0),(0,w.jsx)("span",{className:m().require,children:"*"})]}),(0,w.jsx)("div",{className:m().rating,children:(0,w.jsx)(p.i,{rating:j,setRating:function(e){if(y.length){var a=(0,c.Z)(y);M(a.filter((function(a){return e>=a.minRating&&e<=a.maxRating})))}F(e)},count:5,starSize:24,noSelectedColorStar:"#e5e5e5",withoutNumber:!0,starSelect:!0})})]}),(0,w.jsxs)("div",{className:m().tagsDescriptions,children:[(0,w.jsxs)("div",{className:m().label,children:["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0430\u0440\u0438\u0430\u043d\u0442",(0,w.jsx)("span",{className:m().require,children:"*"})]}),(0,w.jsx)("div",{className:m().tags,children:O.map((function(e){return(0,w.jsx)("button",{className:x()([m().tag,-1!==y.findIndex((function(a){return a.name===e.name}))&&m().selected]),onClick:function(){return function(e){var a=y.findIndex((function(a){return a.name===e.name}));if(-1===a)return M([].concat((0,c.Z)(y),[e]));var n=(0,c.Z)(y);return n.splice(a,1),M(n)}(e)},disabled:z(e),children:(0,w.jsx)("span",{children:e.name})},e.originName)}))})]}),(0,w.jsxs)("div",{className:m().feedbackDescription,children:[(0,w.jsxs)("div",{className:m().feedbackDescriptionLabel,children:[(0,w.jsxs)("div",{className:m().label,children:["\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043e ",I(!1)]}),(0,w.jsxs)("div",{className:m().label,children:[S.length,"/1000"]})]}),(0,w.jsx)("div",{children:(0,w.jsx)(g.g,{rows:100,onChange:function(e){return T(e.target.value)},error:S.length>1e3&&"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 1000 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"})})]})]}),(0,w.jsxs)("div",{className:m().footer,children:[(0,w.jsx)(b.z,{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",buttonType:"ghostButton",onClick:q}),(0,w.jsx)(b.z,{text:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",buttonType:"greenPrimary",onClick:W,disabled:0===j||0===y.length||S.length>1e3})]})]})},y=n(322),M=n(79594),B=n(57709),S=function(e){var a=e.isOpen,n=e.setIsOpen;return(0,w.jsxs)(u.u,{isOpen:a,onRequestClose:function(){return n(!1)},classNameWrapper:s().successWrapper,children:[(0,w.jsx)("div",{className:s().successTitle,children:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u043e\u0442\u0437\u044b\u0432!"}),(0,w.jsx)("div",{className:s().successDescription,children:"\u041e\u0442\u0437\u044b\u0432 \u0431\u0443\u0434\u0435\u0442 \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d \u043f\u043e\u0441\u043b\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u043e\u043c."}),(0,w.jsx)(b.z,{text:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:function(){return n(!1)},buttonType:"greenPrimary"})]})},T=n(53152),O=n.n(T),W=n(19461),I=n(19034),z=n.n(I),q=n(530),V=function(e){var a=e.feedback,n=(0,i.useRef)(null),t=(0,i.useState)(!1),s=t[0],r=t[1],c=(0,i.useState)(!1),o=c[0],l=c[1],d=(0,i.useState)(!1),m=d[0],u=d[1],g=z()(a.createDate).format("DD MMMM YYYY, HH:mm");return(0,i.useEffect)((function(){document.fonts.ready.then((function(){return l(!0)}))}),[]),(0,i.useEffect)((function(){var e;n&&null!==n&&void 0!==n&&null!==(e=n.current)&&void 0!==e&&e.isClamped()&&r(n.current.isClamped())}),[n,o]),(0,w.jsxs)("div",{className:O().card,children:[(0,w.jsx)("div",{className:O().title,children:a.user.name}),(0,w.jsxs)("div",{className:O().subTitle,children:[(0,w.jsx)("div",{className:O().rating,children:(0,w.jsx)(p.i,{rating:a.value,count:5,noSelectedColorStar:"#e5e5e5",withoutNumber:!0})}),(0,w.jsx)("div",{className:O().createDate,children:g})]}),(0,w.jsx)("div",{className:O().tags,children:a.tags.map((function(e,a){return(0,w.jsx)("div",{className:x()([O().tag,k.get(e).maxRating<=3?O().bad:O().good]),children:k.get(e).name},a)}))}),(0,w.jsx)(W.Z,{ref:n,text:a.description,maxLine:3,trimRight:!0,basedOn:"letters",className:x()([O().description])}),s&&(0,w.jsxs)("div",{className:O().reedMore,onClick:function(){return u(!0)},children:["\u0427\u0438\u0442\u0430\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e",(0,w.jsx)(q.H3,{})]}),m&&(0,w.jsxs)("div",{className:O().fullDescriptionWrap,children:[(0,w.jsx)("pre",{className:O().fullDescription,children:a.description}),(0,w.jsxs)("div",{className:O().cancelDescription,onClick:function(){return u(!1)},children:[(0,w.jsx)(q.H3,{})," \u0417\u0430\u043a\u0440\u044b\u0442\u044c"]})]})]})},Z=n(37307),G=n(38495),L=n(59901),E=function(e){var a,n=e.entity,t=e.entityType,r=(0,f.I)(),c=(0,y.T)(M.Gb).user,o=(0,y.T)(v.Fm),l=o.feedbacksList,d=o.canSendFeedback,m=(0,i.useState)(!1),u=m[0],g=m[1],p=(0,i.useState)(!1),_=p[0],x=p[1],k=(0,i.useState)(!1),N=k[0],h=k[1],R=(0,L.Q)(),j={responsive:{desktop1:{breakpoint:{max:9999,min:1200},items:3},tablet2:{breakpoint:{max:1199,min:1020},items:2,partialVisibilityGutter:100},tablet3:{breakpoint:{max:1020,min:900},items:2,partialVisibilityGutter:50},tablet4:{breakpoint:{max:900,min:800},items:2},tablet5:{breakpoint:{max:799,min:700},items:2},mobile1:{breakpoint:{max:699,min:550},items:1},mobile2:{breakpoint:{max:549,min:450},items:1,partialVisibilityGutter:(null===l||void 0===l?void 0:l.feedbacks.length)>1?100:0},mobile3:{breakpoint:{max:449,min:0},items:1}},swipeable:!0,infinite:!1,renderButtonGroupOutside:!0,partialVisible:!0,sliderClass:s().carouselTrack};return(0,i.useEffect)((function(){c&&r((0,v.af)(C(t,n._id)))}),[c]),(0,w.jsxs)("div",{className:s().wrapper,children:[(0,w.jsx)(B.Q,{isOpen:_,setIsOpen:x}),(0,w.jsx)(D,{entity:n,entityType:t,isOpen:u,setIsOpen:g,user:c,setIsSuccessModalOpen:h}),(0,w.jsx)(S,{isOpen:N,setIsOpen:h}),(0,w.jsxs)("div",{className:s().topWrapper,children:[(0,w.jsx)("div",{className:s().title,children:"\u041e\u0442\u0437\u044b\u0432\u044b"}),(0,w.jsx)("div",{className:s().createWrapper,children:(0,w.jsx)(b.z,{text:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432",onClick:function(){c?g(!0):x(!0)},disabled:!!c&&!d,buttonType:"ghostButton"})})]}),!(null===l||void 0===l||!l.feedbacks.length)&&(0,w.jsx)("div",{className:s().bottomWrapper,children:(0,w.jsx)(G.l,{Buttons:(null===l||void 0===l?void 0:l.feedbacks.length)>("desktop"===R?3:1)&&(0,w.jsx)(Z.m,{}),carouselOptions:j,children:null===l||void 0===l||null===(a=l.feedbacks)||void 0===a?void 0:a.map((function(e,a){return(0,w.jsx)(V,{feedback:e},a)}))})}),0===(null===l||void 0===l?void 0:l.feedbacks.length)&&(0,w.jsx)("div",{className:s().emptyContent,children:(0,w.jsx)("span",{children:"\u041e\u0442\u0437\u044b\u0432\u043e\u0432 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442, \u0432\u0430\u0448 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0435\u0440\u0432\u044b\u043c."})})]})}},64131:function(e,a,n){"use strict";n.d(a,{V:function(){return o}});n(2784);var i=n(9357),t=n.n(i),s=n(72779),r=n.n(s),c=n(52322),o=function(e){var a=e.tag,n=e.onClick,i=e.selected;return(0,c.jsxs)("div",{className:r()(t().wrapper,i&&t().selected,n&&t().clickable),onClick:function(){return n?n(a):null},children:[(0,c.jsx)("div",{className:t().title,children:a.name}),a.count&&(0,c.jsx)("div",{className:t().count,children:a.count})]})}},53164:function(e,a,n){"use strict";n.d(a,{$:function(){return m}});n(2784);var i=n(4005),t=n.n(i),s=n(72779),r=n.n(s),c=n(64131),o=n(24082),l=n(55928),d=n(52322),m=function(e){var a=e.tags,n=e.link,i=e.isGenre,s=void 0!==i&&i,m=e.className,u=(0,o.I0)();return a&&0!==a.length?(0,d.jsx)("div",{className:r()(t().wrapper,m&&m),children:a.map((function(e){return(0,d.jsx)(c.V,{tag:e,onClick:n?function(){return u((0,l.VF)("".concat(n,"/").concat(s?"genre":"tag","-").concat(e.sysName)))}:null},e._id)}))}):(0,d.jsx)(d.Fragment,{})}},24740:function(e){e.exports={wrapper:"FeedBacksBlock_wrapper__31GeE",topWrapper:"FeedBacksBlock_topWrapper__2-qBA",title:"FeedBacksBlock_title__1ptf7",successTitle:"FeedBacksBlock_successTitle__2jjze",createWrapper:"FeedBacksBlock_createWrapper__2WQIS",bottomWrapper:"FeedBacksBlock_bottomWrapper__1IGzC",emptyContent:"FeedBacksBlock_emptyContent__2gpXK",successWrapper:"FeedBacksBlock_successWrapper__3geDn",successDescription:"FeedBacksBlock_successDescription__1PxnZ"}},53152:function(e){e.exports={card:"FeedbackCard_card__2Tuvj",title:"FeedbackCard_title__1DHS9",subTitle:"FeedbackCard_subTitle__nmqJS",rating:"FeedbackCard_rating__3BamB",createDate:"FeedbackCard_createDate__1OdUh",tags:"FeedbackCard_tags__123Ad",tag:"FeedbackCard_tag__3x2Bx",good:"FeedbackCard_good__VQgy_",bad:"FeedbackCard_bad__3-fSk",description:"FeedbackCard_description__uHqSs",reedMore:"FeedbackCard_reedMore__1NZpa",cancelDescription:"FeedbackCard_cancelDescription__1aYMU",fullDescriptionWrap:"FeedbackCard_fullDescriptionWrap__LezUA",fullDescription:"FeedbackCard_fullDescription__34zTy"}},29928:function(e){e.exports={blcSend:"FeedbackModal_blcSend__6ZFeC",wrapper:"FeedbackModal_wrapper__284Q3",header:"FeedbackModal_header__3bwrW",title:"FeedbackModal_title__39M01",require:"FeedbackModal_require__2v-fT",rating:"FeedbackModal_rating__32BxG",ratingDescription:"FeedbackModal_ratingDescription__e8MIj",tagsDescriptions:"FeedbackModal_tagsDescriptions__2wdZY",label:"FeedbackModal_label__Fg1dh",tags:"FeedbackModal_tags__1Yw2D",tag:"FeedbackModal_tag__2o0cO",selected:"FeedbackModal_selected__2MS_x",feedbackDescription:"FeedbackModal_feedbackDescription__1z_E9",feedbackDescriptionLabel:"FeedbackModal_feedbackDescriptionLabel__312iX",footer:"FeedbackModal_footer__VebTq"}},9357:function(e){e.exports={wrapper:"Tag_wrapper__3gTer",clickable:"Tag_clickable__1ALjf",title:"Tag_title__2PFgK",selected:"Tag_selected__RmbuV",count:"Tag_count__SalhQ"}},4005:function(e){e.exports={wrapper:"Tags_wrapper__BgR0z"}}}]);
//# sourceMappingURL=9173-67e0d5ed0e3bb3d476d7.js.map